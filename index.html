<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic Map Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a1a;
            color: white;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞ */
        .galaxy-map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1a1a3a 0%, #0a0a1a 70%);
            z-index: 1;
        }
        
        /* –ó–≤–µ–∑–¥—ã */
        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        
        /* –ü–ª–∞–Ω–µ—Ç—ã */
        .planet {
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        
        /* –ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã */
        .game-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            z-index: 10;
        }
        
        /* –ü–∞–Ω–µ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ */
        .resource-panel {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            background: rgba(20, 20, 40, 0.8);
            padding: 10px 20px;
            border-radius: 20px;
            z-index: 10;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(100, 100, 255, 0.3);
        }
        
        .resource {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .resource-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .energy .resource-icon {
            background: #ffcc00;
        }
        
        .minerals .resource-icon {
            background: #00aaff;
        }
        
        .credits .resource-icon {
            background: #00cc66;
        }
        
        /* –ú–∏—Å—Å–∏–æ–Ω–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ */
        .mission-alert {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(200, 50, 50, 0.8);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 0.9rem;
            z-index: 10;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 100, 100, 0.5);
            text-align: center;
            max-width: 80%;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ */
        .mode-toggle {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(30, 30, 60, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            z-index: 10;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(100, 100, 255, 0.3);
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .nav-panel {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .nav-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30, 30, 60, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(100, 100, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="galaxy-map" id="galaxyMap">
        <!-- –ó–≤–µ–∑–¥—ã –∏ –ø–ª–∞–Ω–µ—Ç—ã –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
    </div>
    
    <div class="game-title">XDUST</div>
    
    <div class="resource-panel">
        <div class="resource energy">
            <div class="resource-icon"></div>
            <span>1.2K</span>
        </div>
        <div class="resource minerals">
            <div class="resource-icon"></div>
            <span>850</span>
        </div>
        <div class="resource credits">
            <div class="resource-icon"></div>
            <span>2.5K</span>
        </div>
    </div>
    
    <div class="mission-alert">
        –ú–∏—Å—Å–∏—è: –ó–∞—â–∏—Ç–∏—Ç—å —Å–µ–∫—Ç–æ—Ä –æ—Ç –≤—Ç–æ—Ä–∂–µ–Ω–∏—è
    </div>
    
    <div class="mode-toggle">
        –†–µ–∂–∏–º: –ö–∞—Ä—Ç–∞
    </div>
    
    <div class="nav-panel">
        <div class="nav-button">+</div>
        <div class="nav-button">-</div>
    </div>

    <script>
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤–µ–∑–¥–Ω–æ–≥–æ –ø–æ–ª—è
        const galaxyMap = document.getElementById('galaxyMap');
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–≤–µ–∑–¥
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.opacity = Math.random() * 0.7 + 0.3;
            galaxyMap.appendChild(star);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç
        const planetColors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
        
        for (let i = 0; i < 15; i++) {
            const planet = document.createElement('div');
            planet.classList.add('planet');
            
            const size = Math.random() * 30 + 10;
            planet.style.width = `${size}px`;
            planet.style.height = `${size}px`;
            planet.style.left = `${Math.random() * 90 + 5}%`;
            planet.style.top = `${Math.random() * 90 + 5}%`;
            planet.style.background = planetColors[Math.floor(Math.random() * planetColors.length)];
            
            galaxyMap.appendChild(planet);
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è –∑–≤–µ–∑–¥
        const stars = document.querySelectorAll('.star');
        setInterval(() => {
            stars.forEach(star => {
                if (Math.random() > 0.7) {
                    star.style.opacity = Math.random() * 0.7 + 0.3;
                }
            });
        }, 500);
    </script>
</body>
</html>
<body>
    <!-- –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —à—É—Ç–µ—Ä -->
    <div id="gameContainer">
        <div class="stars" id="stars"></div>
        
        <div id="ui">
            <div class="ui-item"><span>‚ö°</span><span id="score">0</span></div>
            <div class="ui-item"><span>‚ù§Ô∏è</span><span id="lives">3</span></div>
        </div>
        
        <div id="startScreen">
            <h1>üöÄ SPACEDUST</h1>
            <p>Defend Galaxy!</p>
            <p>Dust Your Enemy and Collect Bonuses</p>
            <div class="instructions">Use Buttons to Move and Fire</div>
            <div class="power-ups"><div class="power-up">S</div><div class="power-up">P</div><div class="power-up">L</div></div>
            <button class="btn" ontouchstart="startGame()" onclick="startGame()">–°–¢–ê–†–¢</button>
            <div style="margin-top: 15px;">
                <button class="mode-btn" onclick="switchToGalaxy()">üåå –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞</button>
            </div>
        </div>
        
        <div id="gameOver">
            <h1>Mission Fail</h1>
            <p>Score: <span id="finalScore">0</span></p>
            <p>Sector under enemy control!</p>
            <button class="btn" ontouchstart="restartGame()" onclick="restartGame()">–ü–û–í–¢–û–†–ò–¢–¨</button>
            <div style="margin-top: 15px;">
                <button class="mode-btn" onclick="switchToGalaxy()">üåå –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞</button>
            </div>
        </div>
        
        <canvas id="gameCanvas"></canvas>
        
        <div id="controls">
            <div class="control-btn" id="leftBtn">‚óÄ</div>
            <div class="control-btn" id="rightBtn">‚ñ∂</div>
        </div>
        
        <div id="fireBtn" class="control-btn">FIRE</div>
        
        <div id="leftZone"></div>
        <div id="rightZone"></div>
        
        <div class="mode-switcher">
            <button class="mode-btn" onclick="switchToGalaxy()">üåå –ö–∞—Ä—Ç–∞</button>
        </div>
    </div>

    <!-- –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞ -->
    <div id="galaxyContainer">
        <div class="sirius-dust">‚ú® XDUST –° –°–ò–†–ò–£–°–ê! ‚ú®</div>
        
        <div class="resources-panel">
            <h3>–†–µ—Å—É—Ä—Å—ã XDUST</h3>
            <div>‚ö° –≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1500</span></div>
            <div>ü™ê –ú–µ—Ç–∞–ª–ª—ã: <span id="metals">800</span></div>
            <div>üíé –ö—Ä–∏—Å—Ç–∞–ª–ª—ã: <span id="crystals">300</span></div>
            <div>üöÄ –û—á–∫–∏: <span id="galaxyScore">0</span></div>
        </div>
        
        <div class="mission-alert">
            üö® –°–∏—Ä–∏—É—Å –ø–µ—Ä–µ–¥–∞–µ—Ç XDUST –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —Ñ–ª–æ—Ç–∞!
        </div>
        
        <div class="mode-switcher">
            <button class="mode-btn" onclick="switchToShooter()">üéÆ –®—É—Ç–µ—Ä</button>
        </div>
    </div>

    <script>
        // === –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ú–ï–ñ–î–£ –†–ï–ñ–ò–ú–ê–ú–ò ===
        function switchToGalaxy() {
            document.getElementById('gameContainer').style.display = 'none';
            document.getElementById('galaxyContainer').style.display = 'flex';
            initGalaxyMap();
        }
        
        function switchToShooter() {
            document.getElementById('galaxyContainer').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'flex';
        }
        
        // === –ì–ê–õ–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –ö–ê–†–¢–ê ===
        function initGalaxyMap() {
            const galaxyContainer = document.getElementById('galaxyContainer');
            galaxyContainer.innerHTML = `
                <div class="sirius-dust">‚ú® XDUST –° –°–ò–†–ò–£–°–ê! ‚ú®</div>
                <div class="resources-panel">
                    <h3>–†–µ—Å—É—Ä—Å—ã XDUST</h3>
                    <div>‚ö° –≠–Ω–µ—Ä–≥–∏—è: <span id="energy">1500</span></div>
                    <div>ü™ê –ú–µ—Ç–∞–ª–ª—ã: <span id="metals">800</span></div>
                    <div>üíé –ö—Ä–∏—Å—Ç–∞–ª–ª—ã: <span id="crystals">300</span></div>
                    <div>üöÄ –û—á–∫–∏: <span id="galaxyScore">${score}</span></div>
                </div>
                <div class="mission-alert">
                    üö® –°–∏—Ä–∏—É—Å –ø–µ—Ä–µ–¥–∞–µ—Ç XDUST –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —Ñ–ª–æ—Ç–∞!
                </div>
                <div class="mode-switcher">
                    <button class="mode-btn" onclick="switchToShooter()">üéÆ –®—É—Ç–µ—Ä</button>
                </div>
            `;
            
            // –°–æ–∑–¥–∞–µ–º –≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫—É—é –∫–∞—Ä—Ç—É
            const sectors = [
                { id: 1, x: 15, y: 20, name: "–°–ò–†–ò–£–°", type: "controlled", resources: 2000 },
                { id: 2, x: 25, y: 60, name: "–ê–õ–¨–§–ê –¶–ï–ù–¢–ê–í–†–ê", type: "enemy", resources: 1500 },
                { id: 3, x: 50, y: 30, name: "–ë–ï–¢–ï–õ–¨–ì–ï–ô–ó–ï", type: "neutral", resources: 800 },
                { id: 4, x: 70, y: 50, name: "–ü–†–û–¶–ò–û–ù", type: "controlled", resources: 1200 },
                { id: 5, x: 40, y: 70, name: "–í–ï–ì–ê", type: "enemy", resources: 1800 },
                { id: 6, x: 60, y: 20, name: "–ê–†–ö–¢–£–†", type: "neutral", resources: 600 },
                { id: 7, x: 80, y: 40, name: "–†–ò–ì–ï–õ–¨", type: "controlled", resources: 2500 }
            ];

            // –°–æ–∑–¥–∞–µ–º —Å–µ–∫—Ç–æ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ
            sectors.forEach(sector => {
                const sectorElement = document.createElement('div');
                sectorElement.className = `sector ${sector.type}`;
                sectorElement.style.left = `${sector.x}%`;
                sectorElement.style.top = `${sector.y}%`;
                sectorElement.innerHTML = `
                    <div style="text-align: center; font-size: 10px;">
                        <strong>${sector.name}</strong><br>
                        ‚ö°${sector.resources}
                    </div>
                `;
                
                sectorElement.addEventListener('click', () => {
                    alert(`üöÄ –í—ã–±—Ä–∞–Ω —Å–µ–∫—Ç–æ—Ä: ${sector.name}\nüíé –†–µ—Å—É—Ä—Å—ã: ${sector.resources} XDUST`);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –°–∏—Ä–∏—É—Å–∞
                    if (sector.type === 'enemy') {
                        createResourceStream(sector);
                    }
                });
                
                galaxyContainer.appendChild(sectorElement);
            });

            // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥–Ω—ã–π —Ñ–æ–Ω
            createGalaxyStars();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –°–∏—Ä–∏—É—Å–∞
            setInterval(() => {
                const randomSector = sectors[Math.floor(Math.random() * sectors.length)];
                if (randomSector.name !== "–°–ò–†–ò–£–°") {
                    createResourceStream(randomSector);
                }
            }, 5000);
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –°–∏—Ä–∏—É—Å–∞
        function createResourceStream(targetSector) {
            const sectors = [
                { id: 1, x: 15, y: 20, name: "–°–ò–†–ò–£–°", type: "controlled", resources: 2000 },
                { id: 2, x: 25, y: 60, name: "–ê–õ–¨–§–ê –¶–ï–ù–¢–ê–í–†–ê", type: "enemy", resources: 1500 },
                { id: 3, x: 50, y: 30, name: "–ë–ï–¢–ï–õ–¨–ì–ï–ô–ó–ï", type: "neutral", resources: 800 },
                { id: 4, x: 70, y: 50, name: "–ü–†–û–¶–ò–û–ù", type: "controlled", resources: 1200 },
                { id: 5, x: 40, y: 70, name: "–í–ï–ì–ê", type: "enemy", resources: 1800 },
                { id: 6, x: 60, y: 20, name: "–ê–†–ö–¢–£–†", type: "neutral", resources: 600 },
                { id: 7, x: 80, y: 40, name: "–†–ò–ì–ï–õ–¨", type: "controlled", resources: 2500 }
            ];
            
            const sirius = sectors.find(s => s.name === "–°–ò–†–ò–£–°");
            const stream = document.createElement('div');
            stream.style.position = 'absolute';
            stream.style.left = `${sirius.x}%`;
            stream.style.top = `${sirius.y}%`;
            stream.style.width = '4px';
            stream.style.height = '4px';
            stream.style.background = '#00ffff';
            stream.style.borderRadius = '50%';
            stream.style.boxShadow = '0 0 10px #00ffff';
            document.getElementById('galaxyContainer').appendChild(stream);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
            const animation = stream.animate([
                { 
                    left: `${sirius.x}%`,
                    top: `${sirius.y}%`,
                    opacity: 1
                },
                { 
                    left: `${targetSector.x}%`,
                    top: `${targetSector.y}%`,
                    opacity: 0
                }
            ], {
                duration: 2000,
                easing: 'ease-out'
            });
            
            animation.onfinish = () => {
                stream.remove();
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
                updateGalaxyResources(targetSector.resources * 0.3);
            };
        }

        function updateGalaxyResources(amount) {
            const energyElem = document.getElementById('energy');
            const metalsElem = document.getElementById('metals');
            const crystalsElem = document.getElementById('crystals');
            const scoreElem = document.getElementById('galaxyScore');
            
            let energy = parseInt(energyElem.textContent) + amount;
            let metals = parseInt(metalsElem.textContent) + amount * 0.7;
            let crystals = parseInt(crystalsElem.textContent) + amount * 0.3;
            
            energyElem.textContent = Math.floor(energy);
            metalsElem.textContent = Math.floor(metals);
            crystalsElem.textContent = Math.floor(crystals);
            scoreElem.textContent = score;
            
            // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
            document.body.style.animation = 'glow 0.5s';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 500);
        }

        function createGalaxyStars() {
            const galaxyContainer = document.getElementById('galaxyContainer');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.style.position = 'absolute';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.width = `${Math.random() * 2 + 1}px`;
                star.style.height = star.style.width;
                star.style.background = 'white';
                star.style.borderRadius = '50%';
                star.style.opacity = Math.random() * 0.7 + 0.3;
                star.style.animation = `twinkle ${Math.random() * 3 + 2}s infinite alternate`;
                galaxyContainer.appendChild(star);
            }
        }

        // === –ö–û–°–ú–ò–ß–ï–°–ö–ò–ô –®–£–¢–ï–† ===
        // === –ó–í–£–ö–ò: –ü–£–õ –î–õ–Ø –ë–ï–ó–õ–ê–ì–û–í–û–ô –ò–ì–†–´ ===
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        const shootSounds = [
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/shoot.ogg'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/shoot.mp3'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/shoot.m4a')
        ];
        
        const explosionSounds = [
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/explosion.ogg'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/explosion.mp3'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/explosion.m4a')
        ];
        
        const powerupSounds = [
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/powerup.ogg'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/powerup.mp3'),
            new Audio('https://raw.githubusercontent.com/0penAGI/SPACEDUST/main/powerup.m4a')
        ];

        let shootIndex = 0;
        let explosionIndex = 0;
        let powerupIndex = 0;

        function playShoot() {
            const s = shootSounds[shootIndex];
            s.currentTime = 0;
            s.play().catch(() => {});
            shootIndex = (shootIndex + 1) % shootSounds.length;
        }

        function playExplosion() {
            const s = explosionSounds[explosionIndex];
            s.currentTime = 0;
            s.play().catch(() => {});
            explosionIndex = (explosionIndex + 1) % explosionSounds.length;
        }

        function playPowerup() {
            const s = powerupSounds[powerupIndex];
            s.currentTime = 0;
            s.play().catch(() => {});
            powerupIndex = (powerupIndex + 1) % powerupSounds.length;
        }

        // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤
        function preloadSounds() {
            [...shootSounds, ...explosionSounds, ...powerupSounds].forEach(sound => {
                sound.load();
                sound.volume = 0.7;
            });
        }

        // Telegram WebApp
        let tg = window.Telegram?.WebApp;
        if (tg) { tg.expand(); tg.ready(); }

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // –ó–≤—ë–∑–¥–Ω—ã–π —Ñ–æ–Ω
        function createStars() {
            const starsContainer = document.getElementById('stars');
            starsContainer.innerHTML = '';
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2;
                star.style.width = `${size}px`; star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`; star.style.top = `${Math.random() * 100}%`;
                star.style.opacity = 0.5 + Math.random() * 0.5;
                star.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // –ê–¥–∞–ø—Ç–∏–≤ canvas
        function resizeCanvas() {
            const maxWidth = window.innerWidth - 20;
            const maxHeight = window.innerHeight - 20;
            const aspectRatio = 3 / 4;
            if (maxWidth / maxHeight > aspectRatio) {
                canvas.height = maxHeight;
                canvas.width = maxHeight * aspectRatio;
            } else {
                canvas.width = maxWidth;
                canvas.height = maxWidth / aspectRatio;
            }
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        let gameRunning = false;
        let score = 0;
        let lives = 3;
        let animationId;
        let lastShot = 0;
        const shootCooldown = 250;

        const player = { x: canvas.width / 2 - 20, y: canvas.height - 60, width: 40, height: 40, speed: 5, dx: 0, isDamaged: false, damageTime: 0, flashTime: 0 };
        let bullets = [], enemies = [], stars = [], particles = [], powerUps = [];
        let enemySpawnRate = 0.03;
        let lastSpawnIncrease = Date.now();
        let bossTimer = Date.now();
        let bossInterval = 45000;
        let bossActive = false;
        let boss = null;
        let shieldActive = false;
        let megaShieldStage = 0;
        let megaShieldEnd = 0;
        let speedBoostEnd = 0;
        let laserModeEnd = 0;

        function createGameStars() {
            stars = [];
            for (let i = 0; i < 100; i++) {
                stars.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, size: Math.random() * 2 + 0.5, speed: Math.random() * 1.5 + 0.5, opacity: 0.5 + Math.random() * 0.5 });
            }
        }
        createGameStars();

        function createParticles(x, y, color = null, count = 12) {
            for (let i = 0; i < count; i++) {
                const colors = color ? [color] : ['#ff0000', '#ff8800', '#ffff00'];
                particles.push({ x, y, vx: (Math.random() - 0.5) * 8, vy: (Math.random() - 0.5) * 8, life: 30 + Math.random() * 20, size: 3 + Math.random() * 2, color: colors[Math.floor(Math.random() * colors.length)] });
            }
            playExplosion();
        }

        function createPowerUp(x, y, forcedType = null) {
            if (forcedType) {
                powerUps.push({ x: x - 10, y: y - 10, width: 24, height: 24, speed: 2, type: forcedType });
                return;
            }
            if (Math.random() < 0.3) {
                const types = ['shield', 'speed', 'laser'];
                powerUps.push({ x: x - 10, y: y - 10, width: 20, height: 20, speed: 2, type: types[Math.floor(Math.random() * types.length)] });
            }
        }

        function applyPowerUp(type) {
            playPowerup();
            player.flashTime = Date.now() + 300;
            switch(type) {
                case 'shield': shieldActive = true; setTimeout(() => { shieldActive = false; }, 10000); break;
                case 'speed': speedBoostEnd = Date.now() + 10000; break;
                case 'laser': laserModeEnd = Date.now() + 10000; break;
                case 'megaShield': megaShieldStage = 2; megaShieldEnd = Date.now() + 15000; break;
            }
        }

        // === –†–ò–°–û–í–ê–ù–ò–ï (–í–°–Å –ü–û–õ–ù–û–°–¢–¨–Æ) ===
        function drawPlayer() {
            ctx.save();
            let blink = false;
            if (player.isDamaged && Date.now() - player.damageTime < 1000) {
                blink = Math.floor((Date.now() - player.damageTime) / 60) % 2 === 0;
                ctx.globalAlpha = blink ? 0.2 : 1;
            }
            if (player.flashTime && Date.now() < player.flashTime) {
                ctx.save();
                ctx.globalAlpha = 0.7 * (1 - (player.flashTime - Date.now()) / 300);
                ctx.beginPath();
                ctx.arc(player.x + player.width/2, player.y + player.height/2, player.width * 1.2, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255,255,255,0.8)';
                ctx.shadowBlur = 50;
                ctx.shadowColor = '#fff';
                ctx.fill();
                ctx.restore();
            }
            const gradient = ctx.createLinearGradient(player.x, player.y, player.x, player.y + player.height);
            gradient.addColorStop(0, '#00ffff');
            gradient.addColorStop(1, '#0088ff');
            ctx.fillStyle = gradient;
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#00ffff';
            ctx.beginPath();
            ctx.moveTo(player.x + player.width / 2, player.y);
            ctx.lineTo(player.x, player.y + player.height);
            ctx.lineTo(player.x + player.width / 2, player.y + player.height - 10);
            ctx.lineTo(player.x + player.width, player.y + player.height);
            ctx.closePath();
            ctx.fill();
            ctx.fillStyle = '#ff00ff';
            ctx.shadowColor = '#ff00ff';
            ctx.beginPath();
            ctx.moveTo(player.x + 5, player.y + player.height - 15);
            ctx.lineTo(player.x + 10, player.y + player.height);
            ctx.lineTo(player.x + 15, player.y + player.height - 15);
            ctx.closePath();
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(player.x + 25, player.y + player.height - 15);
            ctx.lineTo(player.x + 30, player.y + player.height);
            ctx.lineTo(player.x + 35, player.y + player.height - 15);
            ctx.closePath();
            ctx.fill();
            const flameHeight = 10 + Math.random() * 10;
            const flameGradient = ctx.createLinearGradient(0, 0, 0, flameHeight);
            flameGradient.addColorStop(0, '#ffff00');
            flameGradient.addColorStop(1, '#ff8800');
            ctx.fillStyle = flameGradient;
            ctx.shadowColor = '#ffff00';
            ctx.beginPath();
            ctx.moveTo(player.x + 7, player.y + player.height);
            ctx.lineTo(player.x + 13, player.y + player.height);
            ctx.lineTo(player.x + 10, player.y + player.height + flameHeight);
            ctx.closePath();
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(player.x + 27, player.y + player.height);
            ctx.lineTo(player.x + 33, player.y + player.height);
            ctx.lineTo(player.x + 30, player.y + player.height + flameHeight);
            ctx.closePath();
            ctx.fill();
            if (megaShieldStage > 0 && Date.now() < megaShieldEnd) {
                ctx.save();
                ctx.beginPath();
                ctx.ellipse(player.x + player.width / 2, player.y + player.height / 2, player.width / 1.25, player.height / 1.05, 0, 0, Math.PI * 2);
                ctx.strokeStyle = megaShieldStage === 2 ? '#00ccff' : '#00ff00';
                ctx.lineWidth = 6;
                ctx.shadowColor = megaShieldStage === 2 ? '#00ccff' : '#00ff00';
                ctx.shadowBlur = 35;
                ctx.globalAlpha = 0.7;
                ctx.stroke();
                ctx.beginPath();
                ctx.ellipse(player.x + player.width / 2, player.y + player.height / 2, player.width / 1.7, player.height / 1.45, 0, 0, Math.PI * 2);
                ctx.strokeStyle = megaShieldStage === 2 ? '#00ff00' : '#0055ff';
                ctx.lineWidth = 3;
                ctx.shadowColor = megaShieldStage === 2 ? '#00ff00' : '#0055ff';
                ctx.shadowBlur = 18;
                ctx.globalAlpha = 0.5;
                ctx.stroke();
                ctx.restore();
            } else if (shieldActive) {
                ctx.strokeStyle = '#00ff00';
                ctx.lineWidth = 2;
                ctx.shadowColor = '#00ff00';
                ctx.shadowBlur = 20;
                ctx.beginPath();
                ctx.ellipse(player.x + player.width / 2, player.y + player.height / 2, player.width / 1.5, player.height / 1.2, 0, 0, Math.PI * 2);
                ctx.stroke();
            }
            ctx.restore();
            ctx.globalAlpha = 1;
        }

        function drawBullet(bullet) {
            ctx.save();
            const isLaser = Date.now() < laserModeEnd;
            ctx.fillStyle = isLaser ? '#ff00ff' : '#ffff00';
            ctx.shadowBlur = isLaser ? 15 : 10;
            ctx.shadowColor = isLaser ? '#ff00ff' : '#ffff00';
            const width = isLaser ? 8 : 4;
            const height = isLaser ? 20 : 12;
            ctx.beginPath();
            ctx.moveTo(bullet.x, bullet.y + height);
            ctx.lineTo(bullet.x + width, bullet.y + height);
            ctx.lineTo(bullet.x + width / 2, bullet.y);
            ctx.closePath();
            ctx.fill();
            if (isLaser) {
                const trailGradient = ctx.createLinearGradient(bullet.x + width / 2, bullet.y + height, bullet.x + width / 2, bullet.y + height + 10);
                trailGradient.addColorStop(0, 'rgba(255, 0, 255, 0.8)');
                trailGradient.addColorStop(1, 'rgba(255, 0, 255, 0)');
                ctx.fillStyle = trailGradient;
                ctx.fillRect(bullet.x, bullet.y + height, width, 10);
            }
            ctx.restore();
        }

        function drawEnemy(enemy) {
            ctx.save();
            const gradient = ctx.createLinearGradient(enemy.x, enemy.y, enemy.x, enemy.y + enemy.height);
            gradient.addColorStop(0, '#ff3232');
            gradient.addColorStop(1, '#880000');
            ctx.fillStyle = gradient;
            ctx.shadowBlur = 12;
            ctx.shadowColor = '#ff3232';
            ctx.beginPath();
            ctx.moveTo(enemy.x + enemy.width / 2, enemy.y + enemy.height);
            ctx.lineTo(enemy.x, enemy.y);
            ctx.lineTo(enemy.x + enemy.width / 2, enemy.y + 12);
            ctx.lineTo(enemy.x + enemy.width, enemy.y);
            ctx.closePath();
            ctx.fill();
            ctx.fillStyle = '#ff9999';
            ctx.beginPath();
            ctx.arc(enemy.x + 10, enemy.y + 10, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(enemy.x + enemy.width - 10, enemy.y + 10, 5, 0, Math.PI * 2);
            ctx.fill();
            const flameHeight = 3 + Math.random() * 3;
            ctx.fillStyle = '#ffff00';
            ctx.shadowColor = '#ffff00';
            ctx.fillRect(enemy.x + 5, enemy.y - flameHeight, 5, flameHeight);
            ctx.fillRect(enemy.x + enemy.width - 10, enemy.y - flameHeight, 5, flameHeight);
            ctx.restore();
        }

        function drawPowerUp(powerUp) {
            ctx.save();
            let color, symbol;
            switch(powerUp.type) {
                case 'shield': color = '#00aaff'; symbol = 'S'; break;
                case 'speed': color = '#00ff00'; symbol = 'P'; break;
                case 'laser': color = '#ffaa00'; symbol = 'L'; break;
                case 'megaShield': color = '#00ccff'; symbol = 'M'; break;
            }
            const gradient = ctx.createRadialGradient(powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2, 0, powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2, powerUp.width/2);
            gradient.addColorStop(0, '#ffffff');
            gradient.addColorStop(1, color);
            ctx.fillStyle = gradient;
            ctx.shadowBlur = 18;
            ctx.shadowColor = color;
            ctx.beginPath();
            ctx.arc(powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2, powerUp.width/2, 0, Math.PI * 2);
            ctx.fill();
            ctx.font = 'bold 14px Orbitron';
            ctx.fillStyle = '#000000';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(symbol, powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2);
            ctx.restore();
        }

        function drawBoss(bossObj) {
            ctx.save();
            ctx.shadowBlur = 30;
            ctx.shadowColor = '#ff00cc';
            ctx.fillStyle = '#ff0055';
            ctx.beginPath();
            ctx.moveTo(bossObj.x + bossObj.width/2, bossObj.y);
            ctx.lineTo(bossObj.x, bossObj.y + bossObj.height);
            ctx.lineTo(bossObj.x + bossObj.width/2, bossObj.y + bossObj.height - 20);
            ctx.lineTo(bossObj.x + bossObj.width, bossObj.y + bossObj.height);
            ctx.closePath();
            ctx.fill();
            ctx.fillStyle = '#ffff00';
            ctx.beginPath();
            ctx.arc(bossObj.x + 20, bossObj.y + 30, 8, 0, Math.PI*2);
            ctx.arc(bossObj.x + bossObj.width - 20, bossObj.y + 30, 8, 0, Math.PI*2);
            ctx.fill();
            ctx.shadowBlur = 0;
            ctx.globalAlpha = 0.8;
            ctx.fillStyle = '#222';
            ctx.fillRect(bossObj.x + 10, bossObj.y + bossObj.height + 4, bossObj.width - 20, 10);
            ctx.fillStyle = '#00ffcc';
            ctx.fillRect(bossObj.x + 10, bossObj.y + bossObj.height + 4, (bossObj.width - 20) * (bossObj.hp/bossObj.maxhp), 10);
            ctx.globalAlpha = 1;
            ctx.restore();
        }

        function drawStars() {
            ctx.fillStyle = '#ffffff';
            stars.forEach(star => {
                ctx.globalAlpha = star.opacity;
                ctx.fillRect(star.x, star.y, star.size, star.size);
            });
            ctx.globalAlpha = 1;
        }

        function drawParticles() {
            particles.forEach((p, i) => {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 50;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size / 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            });
        }

        // === –û–ë–ù–û–í–õ–ï–ù–ò–Ø ===
        function updateStars() {
            stars.forEach(star => {
                star.y += star.speed;
                if (star.y > canvas.height) {
                    star.y = 0;
                    star.x = Math.random() * canvas.width;
                }
            });
        }

        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vx *= 0.95;
                p.vy *= 0.95;
                p.life--;
                p.size *= 0.98;
                if (p.life <= 0 || p.size <= 0.1) particles.splice(i, 1);
            }
        }

        function updatePowerUps() {
            for (let i = powerUps.length - 1; i >= 0; i--) {
                const powerUp = powerUps[i];
                powerUp.y += powerUp.speed;
                if (player.x < powerUp.x + powerUp.width && player.x + player.width > powerUp.x && player.y < powerUp.y + powerUp.height && player.y + player.height > powerUp.y) {
                    applyPowerUp(powerUp.type);
                    powerUps.splice(i, 1);
                    createParticles(powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2, '#00ffff', 20);
                    score += 50;
                    updateUI();
                } else if (powerUp.y > canvas.height) {
                    powerUps.splice(i, 1);
                }
            }
        }

        function movePlayer() {
            const currentSpeed = Date.now() < speedBoostEnd ? player.speed * 1.5 : player.speed;
            player.x += player.dx;
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
        }

        function shoot() {
            const now = Date.now();
            if (now - lastShot > shootCooldown) {
                const isLaser = now < laserModeEnd;
                bullets.push({
                    x: player.x + player.width / 2 - (isLaser ? 4 : 2),
                    y: player.y,
                    width: isLaser ? 8 : 4,
                    height: isLaser ? 20 : 12,
                    speed: isLaser ? 12 : 8
                });
                lastShot = now;
                playShoot();
            }
        }

        function updateBullets() {
            for (let i = bullets.length - 1; i >= 0; i--) {
                bullets[i].y -= bullets[i].speed;
                if (bullets[i].y < 0) bullets.splice(i, 1);
            }
        }

        function spawnEnemy() {
            if (Date.now() - lastSpawnIncrease > 15000) {
                enemySpawnRate = Math.min(enemySpawnRate + 0.005, 0.1);
                lastSpawnIncrease = Date.now();
            }
            if (Math.random() < enemySpawnRate) {
                const size = 30 + Math.random() * 10;
                enemies.push({
                    x: Math.random() * (canvas.width - size),
                    y: -size,
                    width: size,
                    height: size,
                    speed: 1.5 + Math.random() * 1.5,
                    type: 'normal'
                });
            }
            if (!bossActive && Date.now() - bossTimer > bossInterval) {
                bossActive = true;
                boss = {
                    x: canvas.width / 2 - 40,
                    y: -90,
                    width: 80,
                    height: 80,
                    speed: 1,
                    hp: 10,
                    maxhp: 10,
                    type: 'boss'
                };
            }
        }

        function updateEnemies() {
            for (let i = enemies.length - 1; i >= 0; i--) {
                const enemy = enemies[i];
                enemy.y += enemy.speed;
                if (enemy.y > canvas.height) {
                    enemies.splice(i, 1);
                    lives--;
                    updateUI();
                    if (lives <= 0) endGame();
                }
            }
            if (bossActive && boss) {
                boss.y += boss.speed;
                if (boss.y > 40) boss.y = 40;
            }
        }

        function checkCollisions() {
            const bulletsToRemove = [];
            const enemiesToRemove = [];
            const powerUpsToCreate = [];

            for (let b = 0; b < bullets.length; b++) {
                const bullet = bullets[b];
                for (let e = 0; e < enemies.length; e++) {
                    const enemy = enemies[e];
                    if (bullet.x < enemy.x + enemy.width && bullet.x + bullet.width > enemy.x && bullet.y < enemy.y + enemy.height && bullet.y + bullet.height > enemy.y) {
                        bulletsToRemove.push(b);
                        enemiesToRemove.push(e);
                        createParticles(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2, null, 20);
                        powerUpsToCreate.push({x: enemy.x + enemy.width / 2, y: enemy.y + enemy.height / 2});
                        score += 10;
                        updateUI();
                        break;
                    }
                }
            }

            for (let e = 0; e < enemies.length; e++) {
                const enemy = enemies[e];
                if (player.x < enemy.x + enemy.width && player.x + player.width > enemy.x && player.y < enemy.y + enemy.height && player.y + player.height > enemy.y) {
                    enemiesToRemove.push(e);
                    createParticles(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2, null, 20);
                    if (megaShieldStage > 0 && Date.now() < megaShieldEnd) {
                        megaShieldStage--;
                        if (megaShieldStage === 0) megaShieldEnd = 0;
                    } else if (shieldActive) {
                        shieldActive = false;
                    } else {
                        lives--;
                        player.isDamaged = true;
                        player.damageTime = Date.now();
                    }
                    updateUI();
                    if (lives <= 0) endGame();
                }
            }

            if (bossActive && boss) {
                for (let b = 0; b < bullets.length; b++) {
                    const bullet = bullets[b];
                    if (bullet.x < boss.x + boss.width && bullet.x + bullet.width > boss.x && bullet.y < boss.y + boss.height && bullet.y + bullet.height > boss.y) {
                        bulletsToRemove.push(b);
                        boss.hp--;
                        createParticles(bullet.x + bullet.width/2, bullet.y + bullet.height/2, '#00ccff', 6);
                        if (boss.hp <= 0) {
                            createParticles(boss.x + boss.width/2, boss.y + boss.height/2, null, 60);
                            score += 500;
                            updateUI();
                            if (Math.random() < 0.1) createPowerUp(boss.x + boss.width/2, boss.y + boss.height/2, 'megaShield');
                            bossActive = false;
                            boss = null;
                            bossTimer = Date.now();
                        }
                        break;
                    }
                }
            }

            if (bossActive && boss) {
                if (player.x < boss.x + boss.width && player.x + player.width > boss.x && player.y < boss.y + boss.height && player.y + player.height > boss.y) {
                    if (megaShieldStage > 0 && Date.now() < megaShieldEnd) {
                        megaShieldStage--;
                        if (megaShieldStage === 0) megaShieldEnd = 0;
                    } else if (shieldActive) {
                        shieldActive = false;
                    } else {
                        lives--;
                        player.isDamaged = true;
                        player.damageTime = Date.now();
                    }
                    updateUI();
                    if (lives <= 0) endGame();
                }
            }

            bulletsToRemove.sort((a, b) => b - a).forEach(idx => bullets.splice(idx, 1));
            enemiesToRemove.sort((a, b) => b - a).forEach(idx => enemies.splice(idx, 1));
            powerUpsToCreate.forEach(pos => createPowerUp(pos.x, pos.y));
        }

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
        }

        function gameLoop() {
            if (!gameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawStars(); updateStars();
            drawParticles(); updateParticles();
            powerUps.forEach(drawPowerUp); updatePowerUps();
            drawPlayer(); movePlayer();
            bullets.forEach(drawBullet); updateBullets();
            enemies.forEach(drawEnemy); updateEnemies(); spawnEnemy();
            if (bossActive && boss) drawBoss(boss);
            if (megaShieldStage > 0 && Date.now() > megaShieldEnd) megaShieldStage = 0;
            if (player.isDamaged && Date.now() - player.damageTime > 1000) player.isDamaged = false;
            checkCollisions();
            animationId = requestAnimationFrame(gameLoop);
        }

        // === –£–ü–†–ê–í–õ–ï–ù–ò–ï ===
        let isLeftPressed = false, isRightPressed = false, fireInterval;
        function updateDx() {
            const currentSpeed = Date.now() < speedBoostEnd ? player.speed * 1.5 : player.speed;
            player.dx = (isRightPressed ? currentSpeed : 0) - (isLeftPressed ? currentSpeed : 0);
        }
        function setLeft(active) { isLeftPressed = active; document.getElementById('leftBtn').classList.toggle('active', active); updateDx(); }
        function setRight(active) { isRightPressed = active; document.getElementById('rightBtn').classList.toggle('active', active); updateDx(); }
        function setFire(active) {
            document.getElementById('fireBtn').classList.toggle('active', active);
            clearInterval(fireInterval);
            if (active) {
                shoot();
                fireInterval = setInterval(shoot, shootCooldown);
            }
        }

        const leftBtn = document.getElementById('leftBtn'), rightBtn = document.getElementById('rightBtn'), fireBtn = document.getElementById('fireBtn');
        const leftZone = document.getElementById('leftZone'), rightZone = document.getElementById('rightZone');
        [leftBtn, leftZone].forEach(el => {
            el.addEventListener('touchstart', e => { e.preventDefault(); setLeft(true); });
            el.addEventListener('touchend', e => { e.preventDefault(); setLeft(false); });
        });
        [rightBtn, rightZone].forEach(el => {
            el.addEventListener('touchstart', e => { e.preventDefault(); setRight(true); });
            el.addEventListener('touchend', e => { e.preventDefault(); setRight(false); });
        });
        fireBtn.addEventListener('touchstart', e => { e.preventDefault(); setFire(true); });
        fireBtn.addEventListener('touchend', e => { e.preventDefault(); setFire(false); });
        window.addEventListener('blur', () => { setLeft(false); setRight(false); setFire(false); });

        document.addEventListener('keydown', e => {
            if (!gameRunning || e.repeat) return;
            if (e.code === 'ArrowLeft') setLeft(true);
            if (e.code === 'ArrowRight') setRight(true);
            if (e.code === 'Space') setFire(true);
        });
        document.addEventListener('keyup', e => {
            if (e.code === 'ArrowLeft') setLeft(false);
            if (e.code === 'ArrowRight') setRight(false);
            if (e.code === 'Space') setFire(false);
        });

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('controls').style.display = 'flex';
            document.getElementById('fireBtn').style.display = 'block';
            gameRunning = true; score = 0; lives = 3; bullets = []; enemies = []; particles = []; powerUps = [];
            shieldActive = false; speedBoostEnd = 0; laserModeEnd = 0; megaShieldStage = 0; megaShieldEnd = 0;
            player.x = canvas.width / 2 - 20; player.dx = 0; player.isDamaged = false;
            enemySpawnRate = 0.03; lastSpawnIncrease = Date.now(); bossActive = false; boss = null; bossTimer = Date.now();
            updateUI(); resizeCanvas(); createGameStars(); gameLoop();
        }

        function endGame() {
            gameRunning = false; cancelAnimationFrame(animationId);
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('fireBtn').style.display = 'none';
            if (tg) tg.showAlert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á—ë—Ç: ${score}`);
        }

        function restartGame() { startGame(); }

        document.body.addEventListener('touchmove', e => e.preventDefault(), { passive: false });

        // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', preloadSounds);
    </script>
</body>
</html> /
